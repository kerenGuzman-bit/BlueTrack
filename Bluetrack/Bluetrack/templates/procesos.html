<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Procesos BlueTrack</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

    <style>
        /* ====================== MODALES MODERNOS ====================== */
        .modal-bg {
            display: none;
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0.4);
            backdrop-filter: blur(6px);
            justify-content: center;
            align-items: center;
            z-index: 2000;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .modal-bg.show {
            display: flex;
            opacity: 1;
        }

        .modal-window {
            background: #fff;
            border-radius: 20px;
            width: 90%;
            max-width: 500px;
            max-height: 80vh;
            overflow-y: auto;
            padding: 25px 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            transform: translateY(-20px);
            transition: transform 0.3s ease;
        }

        .modal-bg.show .modal-window {
            transform: translateY(0);
        }

        .modal-close {
            position: absolute;
            top: 12px;
            right: 18px;
            font-size: 28px;
            cursor: pointer;
            color: #0a5aa1;
            font-weight: bold;
            transition: color 0.2s;
        }

        .modal-close:hover {
            color: #2ca3f2;
        }

        .modal-window h3 {
            color: #0a5aa1;
            margin-bottom: 15px;
            font-size: 22px;
        }

        .modal-window p {
            line-height: 1.6;
            color: #333;
        }

        /* Opcional: Scroll interno con estilo */
        .modal-window::-webkit-scrollbar {
            width: 8px;
        }

        .modal-window::-webkit-scrollbar-thumb {
            background-color: #0a7bd4;
            border-radius: 4px;
        }

        .modal-window::-webkit-scrollbar-track {
            background: #f0f7ff;
        }
    </style>
</head>
<body id="procesos">

    <!-- CONTENIDO PRINCIPAL (igual que antes) -->
    <nav class="main-nav">
        <div class="nav-container">
            <div class="user-info">
                <img src="{{ url_for('static', filename='agua.png') }}" alt="User Icon">
                <span>USER</span>
            </div>
            <ul class="nav-menu">
                <li class="nav-item"><a href="{{ url_for('paginas.categorias') }}" class="nav-link">Categor√≠as</a></li>
                <li class="nav-item"><a href="{{ url_for('paginas.manual') }}" class="nav-link">Manual de Control</a></li>
                <li class="nav-item active"><a href="{{ url_for('paginas.procesos') }}" class="nav-link">Procesos</a></li>
                <li class="nav-item"><a href="{{ url_for('paginas.comunidad') }}" class="nav-link">Comunidad</a></li>
                <li class="nav-item"><a href="{{ url_for('paginas.control') }}" class="nav-link">Control Centralizado</a></li>
                <li class="nav-item"><a href="{{ url_for('paginas.calculadora') }}" class="nav-link">Calculadora</a></li>
            </ul>
            <div class="nav-footer">
                <span class="support-item">üíß Soporte de Agua</span>
                <a href="{{ url_for('auth.index') }}" class="close-nav-btn">
                    <i class="fas fa-sign-out-alt"></i> Cerrar sesi√≥n
                </a>
            </div>
        </div>
    </nav>

    <main class="content">
        <header class="content-header">
            <h1>Procesos</h1>
        </header>

        <div class="category-sections">
            <!-- Consumo Responsable -->
            <section class="category-group">
                <h2>Consumo Responsable</h2>
                <div class="scroll-container">
                    <div class="category-items">
                        <div class="category-card">
                            <img src="{{ url_for('static', filename='agua.jpeg') }}" alt="Consumo Agua">
                            <h3>Monitoreo de Consumo</h3>
                            <p>Supervisa el uso diario de agua y detecta excesos para promover un consumo eficiente.</p>
                            <button class="btn btn-primary" onclick="openModal('modal1')">Ver Detalles</button>
                        </div>
                        <div class="category-card">
                            <img src="{{ url_for('static', filename='agua4.jpg') }}" alt="Ahorro">
                            <h3>Ahorro y Eficiencia</h3>
                            <p>Descubre estrategias para reducir el gasto de agua sin afectar tus actividades diarias.</p>
                            <button class="btn btn-primary" onclick="openModal('modal2')">Ver Detalles</button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Gesti√≥n del Agua -->
            <section class="category-group">
                <h2>Gesti√≥n del Agua</h2>
                <div class="scroll-container">
                    <div class="category-items">
                        <div class="category-card">
                            <img src="{{ url_for('static', filename='agua.jpeg') }}" alt="Reutilizaci√≥n">
                            <h3>Reutilizaci√≥n del Agua</h3>
                            <p>Aprende a aprovechar el agua de lluvia y de lavado para riego u otros usos dom√©sticos.</p>
                            <button class="btn btn-primary" onclick="openModal('modal3')">Ver Detalles</button>
                        </div>
                        <div class="category-card">
                            <img src="{{ url_for('static', filename='agua.jpg') }}" alt="Detecci√≥n">
                            <h3>Detecci√≥n de Fugas</h3>
                            <p>Identifica p√©rdidas de agua en el sistema y recibe alertas autom√°ticas de fallas.</p>
                            <button class="btn btn-primary" onclick="openModal('modal4')">Ver Detalles</button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- An√°lisis -->
            <section class="category-group">
                <h2>An√°lisis</h2>
                <div class="scroll-container">
                    <div class="category-items">
                        <div class="category-card">
                            <img src="{{ url_for('static', filename='agua3.jpg') }}" alt="Estad√≠sticas">
                            <h3>Estad√≠sticas</h3>
                            <p>Datos y m√©tricas de todos los procesos productivos.</p>
                            <button class="btn btn-primary" onclick="openModal('modal5')">Ver Detalles</button>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </main>

    <!-- MODALES -->
    <div id="modal1" class="modal-bg">
        <div class="modal-window">
            <span class="modal-close" onclick="closeModal('modal1')">&times;</span>
            <h3>Monitoreo de Consumo</h3>
            <p>El monitoreo permite supervisar en tiempo real el uso de agua en distintas √°reas, detectando patrones de consumo y posibles excesos, para generar alertas y optimizar el uso del recurso.</p>
        </div>
    </div>

    <div id="modal2" class="modal-bg">
        <div class="modal-window">
            <span class="modal-close" onclick="closeModal('modal2')">&times;</span>
            <h3>Ahorro y Eficiencia</h3>
            <p>Incluye estrategias como uso de dispositivos eficientes, concienciaci√≥n sobre h√°bitos de consumo y planificaci√≥n de tareas dom√©sticas para minimizar el gasto de agua.</p>
        </div>
    </div>

    <div id="modal3" class="modal-bg">
        <div class="modal-window">
            <span class="modal-close" onclick="closeModal('modal3')">&times;</span>
            <h3>Reutilizaci√≥n del Agua</h3>
            <p>Se pueden aprovechar aguas grises y de lluvia para riego, limpieza o procesos industriales, reduciendo la dependencia del agua potable y fomentando la sostenibilidad.</p>
        </div>
    </div>

    <div id="modal4" class="modal-bg">
        <div class="modal-window">
            <span class="modal-close" onclick="closeModal('modal4')">&times;</span>
            <h3>Detecci√≥n de Fugas</h3>
            <p>Las fugas se identifican mediante sensores o inspecciones peri√≥dicas, permitiendo un mantenimiento preventivo y evitando p√©rdidas innecesarias de agua.</p>
        </div>
    </div>

    <div id="modal5" class="modal-bg">
        <div class="modal-window">
            <span class="modal-close" onclick="closeModal('modal5')">&times;</span>
            <h3>Estad√≠sticas</h3>
            <p>Recopila datos de consumo, ahorro y eficiencia de agua para generar informes que ayuden en la toma de decisiones y la mejora continua de los procesos.</p>
        </div>
    </div>

    <script>
        function openModal(id) {
            const modal = document.getElementById(id);
            modal.classList.add('show');
        }
        function closeModal(id) {
            const modal = document.getElementById(id);
            modal.classList.remove('show');
        }
    </script>

    <!-- Dentro de tu HTML de ‚Äúprocesos‚Äù (por ejemplo al final, antes del </body>) -->

<!-- MODAL DATOS REALES -->
<div id="modalDatos" class="modal-bg">
  <div class="modal-window">
    <span class="modal-close" onclick="closeModal('modalDatos')">&times;</span>
    <h3>Datos Relevantes sobre Agua en Colombia</h3>
    <div style="margin-bottom: 20px;">
      <canvas id="chartAccesoAgua"></canvas>
    </div>
    <div style="margin-bottom: 20px;">
      <canvas id="chartConsumoPc"></canvas>
    </div>
    <p style="font-size: 14px; color: #555;">
      ‚Ä¢ Seg√∫n el DANE, en 2020 la cobertura de agua potable nacional fue del <b>93,2‚ÄØ%</b>. :contentReference[oaicite:0]{index=0}  
    </p>
    <p style="font-size: 14px; color: #555;">
      ‚Ä¢ De acuerdo con la OCDE, el consumo de agua per c√°pita en Colombia es de aproximadamente <b>1.988 litros por a√±o</b>. :contentReference[oaicite:1]{index=1}  
    </p>
    <p style="font-size: 13px; color: #777;">
      Fuente: DANE / OCDE / Superservicios.
    </p>
  </div>
</div>

<!-- Bot√≥n para abrir ese modal -->
<!-- Puedes ponerlo donde quieras, por ejemplo en la secci√≥n de ‚ÄúAn√°lisis‚Äù -->
<button class="btn btn-primary" onclick="openModal('modalDatos')">Ver Datos Oficiales</button>

<!-- Script para los gr√°ficos -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
  function openModal(id) {
    const modal = document.getElementById(id);
    modal.classList.add('show');
  }
  function closeModal(id) {
    const modal = document.getElementById(id);
    modal.classList.remove('show');
  }

  // Datos para los gr√°ficos
  document.addEventListener("DOMContentLoaded", function() {
    // Gr√°fico 1: acceso a agua potable (DANE)
    const ctxAcc = document.getElementById('chartAccesoAgua').getContext('2d');
    new Chart(ctxAcc, {
      type: 'doughnut',
      data: {
        labels: ['Con acceso', 'Sin acceso'],
        datasets: [{
          data: [93.2, 100 - 93.2],  // porcentajes
          backgroundColor: ['#0a7bd4', '#cce6ff']
        }]
      },
      options: {
        responsive: true,
        plugins: {
          legend: { position: 'bottom' }
        }
      }
    });

    // Gr√°fico 2: consumo per c√°pita (seg√∫n OCDE)
    const ctxCons = document.getElementById('chartConsumoPc').getContext('2d');
    new Chart(ctxCons, {
      type: 'bar',
      data: {
        labels: ['Uso per c√°pita (litros/a√±o)'],
        datasets: [{
          label: '1.988 L/a√±o (Colombia, OCDE)',
          data: [1988],
          backgroundColor: ['#2ca3f2']
        }]
      },
      options: {
        responsive: true,
        scales: {
          y: { beginAtZero: true }
        }
      }
    });
  });
</script>
<!-- Agrega este modal en tu HTML de Procesos -->

<!-- MODAL DATOS REALES MONITOREO DE CONSUMO -->
<div id="modal1" class="modal-bg">
  <div class="modal-window">
    <span class="modal-close" onclick="closeModal('modal1')">&times;</span>
    <h3>Monitoreo de Consumo - Datos Oficiales</h3>
    <p>A continuaci√≥n, algunas estad√≠sticas recientes que demuestran la veracidad del monitoreo de agua basado en datos oficiales:</p>

    <!-- Gr√°fico 1: Distribuci√≥n de fuentes de captaci√≥n de agua en la industria (DANE EAI 2023) -->
    <div style="margin-bottom: 20px;">
      <canvas id="chartFuentesIndustriales"></canvas>
    </div>
    <p style="font-size: 14px; color: #555;">
      Seg√∫n la Encuesta Ambiental Industrial (DANE, 2023), el 55‚ÄØ% del agua utilizada por la industria proviene de fuentes superficiales, 23,3‚ÄØ% de acueducto, 17,8‚ÄØ% de agua subterr√°nea, 3,3‚ÄØ% de agua de lluvia y el resto de otras fuentes. :contentReference[oaicite:0]{index=0}  
    </p>

    <!-- Gr√°fico 2: Consumo promedio de agua potable por suscriptor (Superservicios) -->
    <div style="margin-bottom: 20px;">
      <canvas id="chartConsumoMensual"></canvas>
    </div>
    <p style="font-size: 14px; color: #555;">
      Seg√∫n el reporte estad√≠stico de servicios p√∫blicos, el consumo promedio nacional de agua potable por suscriptor ha mostrado una tendencia decreciente: por ejemplo, pas√≥ de ~22,11 m¬≥/mes en a√±os anteriores a ~14,60 m¬≥/suscriptor‚Äëmes en 2020. :contentReference[oaicite:1]{index=1}  
    </p>

    <!-- Gr√°fico 3: Cobertura de acueducto (ODS / GEIH) -->
    <div style="margin-bottom: 20px;">
      <canvas id="chartCobertura"></canvas>
    </div>
    <p style="font-size: 14px; color: #555;">
      Seg√∫n el Reporte Nacional Voluntario ODS (DANE), la cobertura de agua potable reportada es de aproximadamente <b>90,3‚ÄØ%</b> para el indicador GEIH (Encuesta de Hogares). :contentReference[oaicite:2]{index=2}  
    </p>

    <p style="font-size: 13px; color: #777;">
      Fuentes: DANE (EAI 2023, GEIH), Superservicios.  
    </p>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
  // al cargar la p√°gina, crear los gr√°ficos dentro de este modal
  document.addEventListener('DOMContentLoaded', function() {
    // Gr√°fico fuentes industriales
    const ctx1 = document.getElementById('chartFuentesIndustriales').getContext('2d');
    new Chart(ctx1, {
      type: 'pie',
      data: {
        labels: ['Superficial', 'Acueducto', 'Subterr√°nea', 'Lluvia', 'Otras'],
        datasets: [{
          data: [55.0, 23.3, 17.8, 3.3, 0.5],
          backgroundColor: ['#0a7bd4', '#2ca3f2', '#7ecbff', '#cce6ff', '#e0f2ff']
        }]
      },
      options: {
        responsive: true,
        plugins: { legend: { position: 'bottom' } }
      }
    });

    // Gr√°fico consumo mensual promedio suscriptor
    const ctx2 = document.getElementById('chartConsumoMensual').getContext('2d');
    new Chart(ctx2, {
      type: 'bar',
      data: {
        labels: ['2019','2020'],  // puedes agregar m√°s a√±os si tienes datos
        datasets: [{
          label: 'm¬≥/mes por suscriptor',
          data: [13.50, 14.60],  // ejemplo, seg√∫n reporte Superservicios :contentReference[oaicite:3]{index=3}
          backgroundColor: ['#0a7bd4','#2ca3f2']
        }]
      },
      options: {
        responsive: true,
        scales: {
          y: { beginAtZero: true }
        }
      }
    });

    // Gr√°fico cobertura acueducto ODS / GEIH
    const ctx3 = document.getElementById('chartCobertura').getContext('2d');
    new Chart(ctx3, {
      type: 'doughnut',
      data: {
        labels: ['Con agua potable', 'Sin agua potable'],
        datasets: [{
          data: [90.3, 100 - 90.3],  // 90,3% seg√∫n ODS GEIH :contentReference[oaicite:4]{index=4}
          backgroundColor: ['#0a7bd4', '#cce6ff']
        }]
      },
      options: {
        responsive: true,
        plugins: { legend: { position: 'bottom' } }
      }
    });
  });
</script>

</body>
</html>
